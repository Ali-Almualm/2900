{% extends "base.html" %}

{% block title %}BookMe - Timetable{% endblock %}

{% block content %}
    <h2>Timetable (15-Minute Slots)</h2>

    <!-- Date Selector -->
    <label for="selected-date">Select Date:</label>
    <input type="date" id="selected-date" value="{{ selected_date|date:'Y-m-d' }}" onchange="changeDate()">

    <!-- Parent container for horizontal layout -->
    <div class="timetable-container">
        {% for activity, slots in timetable_by_activity.items %}
            <div class="timetable">
                <h3>
                    {% if activity == "pool" %}Pool
                    {% elif activity == "switch" %}Nintendo Switch
                    {% elif activity == "table_tennis" %}Table Tennis
                    {% endif %}
                    <button onclick="toggleTimetable('{{ activity }}')">Show timetable</button>
                </h3>
                <div id="timetable-{{ activity }}" class="timetable-content" style="display: none;">
                    <table>
                        <tr>
                            <th>Time Slot</th>
                            <th>Status</th>
                            <th>Booked By</th>
                            <th>Action</th>
                        </tr>
                        {% for slot in slots %}
                        <tr>
                            <td>{{ slot.time }}</td>
                            <td>{{ slot.status }}</td>
                            <td>{{ slot.booked_by }}</td>
                            <td><button>Book</button></td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        {% endfor %}
    </div>

    <script>
        function toggleTimetable(activity) {
            var timetableContent = document.getElementById('timetable-' + activity);
            if (timetableContent.style.display === 'none') {
                timetableContent.style.display = 'block';
            } else {
                timetableContent.style.display = 'none';
            }
        }
    </script>
{% endblock %}